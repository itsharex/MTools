# 图片格式转换功能说明

## 功能概述

图片格式转换功能允许用户在不同的图片格式之间进行转换，支持单文件和批量处理。

## 支持的格式

- **JPEG (.jpg)** - 最常用的图片格式，有损压缩
- **PNG (.png)** - 无损压缩，支持透明通道
- **WebP (.webp)** - 现代格式，体积小质量好
- **GIF (.gif)** - 支持动画的格式
- **BMP (.bmp)** - 位图格式，无压缩
- **TIFF (.tiff)** - 专业图像格式
- **ICO (.ico)** - 图标格式

## 主要功能

### 1. 文件选择
- **选择文件**: 支持选择多个图片文件
- **选择文件夹**: 自动扫描文件夹中的所有图片文件
- **文件列表**: 显示已选择的文件，包含文件名、尺寸、大小和格式信息
- **移除文件**: 可以单独移除列表中的文件
- **清空列表**: 一键清空所有已选择的文件

### 2. 格式选项
- **目标格式选择**: 通过单选按钮选择目标格式
- **质量调整**: 使用滑块调整输出质量（50-100）
  - 质量设置对 JPG、WebP、TIFF 格式有效
  - PNG 和 GIF 等格式使用各自的优化参数

### 3. 输出选项
- **保存到原目录**: 将转换后的文件保存到原文件所在目录
- **自定义输出目录**: 选择一个自定义目录保存所有转换后的文件

### 4. 转换处理
- **进度显示**: 实时显示转换进度和当前处理的文件
- **批量处理**: 自动处理所有选中的文件
- **智能跳过**: 自动跳过目标格式与源格式相同的文件
- **结果反馈**: 显示转换成功的文件数量

## 技术特性

### 格式处理
- **JPEG**: 自动处理透明通道，转换为白色背景
- **PNG**: 优化压缩级别，保留透明通道
- **WebP**: 高效压缩，支持透明通道
- **GIF**: 自动转换为调色板模式
- **TIFF**: 使用 LZW 压缩
- **其他格式**: 使用各自的最佳参数

### 用户界面
- **Material Design**: 遵循 Material Design 3 设计规范
- **响应式布局**: 自适应不同窗口大小
- **实时预览**: 显示文件详细信息
- **友好提示**: 提供清晰的操作指引和格式说明

## 使用方法

1. 在主界面点击"图片处理"
2. 点击"格式转换"卡片
3. 选择要转换的图片文件或文件夹
4. 选择目标格式
5. 调整质量参数（可选）
6. 选择输出选项
7. 点击"开始转换"按钮
8. 等待转换完成，查看结果

## 注意事项

- 转换后的文件会自动添加目标格式的扩展名
- JPEG 格式不支持透明通道，透明背景会转换为白色
- GIF 转换时会自动进行颜色量化
- 建议使用 85 的质量设置以获得最佳的质量/大小平衡
- 批量转换时，已存在的同名文件会被覆盖

## 实现文件

- `src/views/image_format_view.py` - 格式转换视图
- `src/services/image_service.py` - 图片处理服务（convert_format 方法）
- `src/views/image_view.py` - 图片处理主视图

