# æ·»åŠ æ–°å·¥å…·æŒ‡å—

æœ¬æŒ‡å—è¯´æ˜å¦‚ä½•å‘ MyTools åº”ç”¨æ·»åŠ æ–°çš„å·¥å…·å¹¶ä½¿å…¶è‡ªåŠ¨åœ¨æœç´¢ç³»ç»Ÿä¸­å¯ç”¨ã€‚

## ğŸ“‹ å¿«é€Ÿæ­¥éª¤

### 1. åˆ›å»ºå·¥å…·è§†å›¾

åœ¨ç›¸åº”çš„ç›®å½•ä¸‹åˆ›å»ºå·¥å…·è§†å›¾ç±»ï¼š
- å›¾ç‰‡å·¥å…·ï¼š`src/views/image/`
- éŸ³é¢‘å·¥å…·ï¼š`src/views/media/`
- è§†é¢‘å·¥å…·ï¼š`src/views/media/`
- å¼€å‘å·¥å…·ï¼š`src/views/dev_tools/`

### 2. æ³¨å†Œåˆ°æœç´¢ç³»ç»Ÿ

åœ¨ `src/tool_registry.py` ä¸­æ·»åŠ å·¥å…·æ³¨å†Œï¼š

```python
register_tool_manual(
    name="å·¥å…·åç§°",              # æ˜¾ç¤ºç»™ç”¨æˆ·çš„åç§°
    description="å·¥å…·æè¿°",       # ç®€çŸ­æè¿°ï¼ˆä¸€å¥è¯ï¼‰
    category="åˆ†ç±»",              # å›¾ç‰‡å¤„ç†/éŸ³é¢‘å¤„ç†/è§†é¢‘å¤„ç†/å¼€å‘å·¥å…·
    keywords=["å…³é”®è¯1", "å…³é”®è¯2", "english"],  # æœç´¢å…³é”®è¯
    icon="ICON_NAME",            # Flet å›¾æ ‡åç§°ï¼ˆä¸å« ft.Icons.ï¼‰
    tool_id="category.tool_name", # å·¥å…·IDï¼Œæ ¼å¼ï¼šåˆ†ç±».å·¥å…·å
)
```

### 3. å®ç°å·¥å…·æ‰“å¼€é€»è¾‘

ç¡®ä¿å·¥å…·å¯ä»¥é€šè¿‡ `tool_id` æ‰“å¼€ï¼š

#### å›¾ç‰‡å·¥å…·
åœ¨ `ImageView` ä¸­æ·»åŠ  `open_tool()` æ–¹æ³•çš„case

#### éŸ³é¢‘å·¥å…·
åœ¨ `AudioView` ä¸­æ·»åŠ  `open_tool()` æ–¹æ³•çš„case

#### è§†é¢‘å·¥å…·
åœ¨ `VideoView` ä¸­æ·»åŠ  `_open_view()` æ–¹æ³•çš„case

#### å¼€å‘å·¥å…·
åœ¨ `DevToolsView` ä¸­æ·»åŠ  `open_tool()` æ–¹æ³•çš„case

---

## ğŸ“ å®Œæ•´ç¤ºä¾‹

å‡è®¾è¦æ·»åŠ ä¸€ä¸ª"å›¾ç‰‡æ»¤é•œ"å·¥å…·ï¼š

### æ­¥éª¤ 1ï¼šåˆ›å»ºè§†å›¾ç±»

```python
# src/views/image/filter_view.py
import flet as ft
from typing import Optional, Callable

class ImageFilterView(ft.Container):
    """å›¾ç‰‡æ»¤é•œè§†å›¾ã€‚"""
    
    def __init__(
        self,
        page: ft.Page,
        config_service: ConfigService,
        image_service: ImageService,
        on_back: Optional[Callable] = None
    ) -> None:
        super().__init__()
        self.page = page
        self.config_service = config_service
        self.image_service = image_service
        self.on_back = on_back
        self.expand = True
        
        self._build_ui()
    
    def _build_ui(self) -> None:
        # æ„å»ºUI...
        pass
```

### æ­¥éª¤ 2ï¼šåœ¨å·¥å…·æ³¨å†Œè¡¨ä¸­æ³¨å†Œ

åœ¨ `src/tool_registry.py` çš„å›¾ç‰‡å¤„ç†éƒ¨åˆ†æ·»åŠ ï¼š

```python
register_tool_manual(
    name="å›¾ç‰‡æ»¤é•œ",
    description="ä¸ºå›¾ç‰‡æ·»åŠ å„ç§æ»¤é•œæ•ˆæœ",
    category="å›¾ç‰‡å¤„ç†",
    keywords=["æ»¤é•œ", "æ•ˆæœ", "ç¾åŒ–", "filter"],
    icon="FILTER",
    tool_id="image.filter",
)
```

### æ­¥éª¤ 3ï¼šåœ¨ ImageView ä¸­æ·»åŠ æ‰“å¼€é€»è¾‘

åœ¨ `src/views/image/image_view.py` ä¸­ï¼š

```python
from views.image.filter_view import ImageFilterView

class ImageView(ft.Container):
    def __init__(self, ...):
        # ...
        self.filter_view: Optional[ImageFilterView] = None
    
    def open_tool(self, tool_name: str) -> None:
        """æ‰“å¼€æŒ‡å®šå·¥å…·"""
        if tool_name == "filter":
            if not self.filter_view:
                self.filter_view = ImageFilterView(
                    self.page,
                    self.config_service,
                    self.image_service,
                    on_back=self._back_to_main
                )
            self.current_sub_view = self.filter_view
            self.current_sub_view_type = "filter"
            self.parent_container.content = self.filter_view
            self.parent_container.update()
        # ... å…¶ä»–å·¥å…·
```

### æ­¥éª¤ 4ï¼šæ·»åŠ åˆ°ä¸»ç•Œé¢å¡ç‰‡ï¼ˆå¯é€‰ï¼‰

åœ¨ `ImageView._build_ui()` ä¸­æ·»åŠ åŠŸèƒ½å¡ç‰‡ï¼š

```python
FeatureCard(
    icon=ft.Icons.FILTER,
    title="å›¾ç‰‡æ»¤é•œ",
    description="ä¸ºå›¾ç‰‡æ·»åŠ å„ç§æ»¤é•œæ•ˆæœ",
    gradient_colors=("#667eea", "#764ba2"),
    on_click=self._open_filter_dialog,
),
```

---

## ğŸ¯ Tool ID å‘½åè§„èŒƒ

Tool ID æ ¼å¼ï¼š`<category>.<tool_name>[.<sub_tool>]`

### åˆ†ç±»å‰ç¼€ï¼š
- `image.*` - å›¾ç‰‡å¤„ç†å·¥å…·
- `audio.*` - éŸ³é¢‘å¤„ç†å·¥å…·
- `video.*` - è§†é¢‘å¤„ç†å·¥å…·
- `dev.*` - å¼€å‘å·¥å…·

### ç¤ºä¾‹ï¼š
- `image.compress` - å›¾ç‰‡å‹ç¼©
- `image.format` - å›¾ç‰‡æ ¼å¼è½¬æ¢
- `image.puzzle.split` - å›¾ç‰‡åˆ‡å‰²ï¼ˆæ‹¼å›¾å­å·¥å…·ï¼‰
- `audio.format` - éŸ³é¢‘æ ¼å¼è½¬æ¢
- `video.extract_audio` - è§†é¢‘æå–éŸ³é¢‘
- `dev.python_terminal` - Pythonç»ˆç«¯

---

## ğŸ” å›¾æ ‡å‚è€ƒ

ä½¿ç”¨ Flet Iconsï¼Œå¸¸ç”¨å›¾æ ‡ï¼š
- `COMPRESS` - å‹ç¼©
- `TRANSFORM` - è½¬æ¢
- `CROP` - è£å‰ª
- `ROTATE_90_DEGREES_CCW` - æ—‹è½¬
- `FILTER` - æ»¤é•œ
- `AUDIO_FILE` - éŸ³é¢‘
- `VIDEO_FILE` - è§†é¢‘
- `CODE` - ä»£ç 
- `IMAGE` - å›¾ç‰‡

å®Œæ•´å›¾æ ‡åˆ—è¡¨ï¼šhttps://gallery.flet.dev/icons-browser/

---

## âœ… æ£€æŸ¥æ¸…å•

æ·»åŠ æ–°å·¥å…·å‰ï¼Œç¡®ä¿ï¼š

- [ ] å·¥å…·è§†å›¾ç±»å·²åˆ›å»º
- [ ] å·¥å…·å·²åœ¨ `tool_registry.py` æ³¨å†Œ
- [ ] Tool ID æ ¼å¼æ­£ç¡®
- [ ] å›¾æ ‡åç§°æ­£ç¡®ï¼ˆä¸å« `ft.Icons.` å‰ç¼€ï¼‰
- [ ] å…³é”®è¯åŒ…å«ä¸­è‹±æ–‡
- [ ] çˆ¶è§†å›¾æœ‰æ‰“å¼€è¯¥å·¥å…·çš„é€»è¾‘
- [ ] ï¼ˆå¯é€‰ï¼‰ä¸»ç•Œé¢æœ‰åŠŸèƒ½å¡ç‰‡

---

## ğŸš€ æµ‹è¯•

1. å¯åŠ¨åº”ç”¨
2. ç‚¹å‡»å³ä¸‹è§’æœç´¢æŒ‰é’®æˆ–æŒ‰ `Ctrl+K`
3. æœç´¢æ–°å·¥å…·çš„åç§°æˆ–å…³é”®è¯
4. ç‚¹å‡»æœç´¢ç»“æœï¼Œç¡®è®¤èƒ½æ­£ç¡®æ‰“å¼€å·¥å…·

---

## ğŸ“Š å½“å‰å·²æ³¨å†Œå·¥å…·

### å›¾ç‰‡å¤„ç† (14ä¸ª)
- å›¾ç‰‡å‹ç¼©ã€æ ¼å¼è½¬æ¢ã€è°ƒæ•´å¤§å°ã€è£å‰ªå›¾ç‰‡
- æ—‹è½¬/ç¿»è½¬ã€å»é™¤èƒŒæ™¯ã€æ·»åŠ æ°´å°ã€å›¾ç‰‡ä¿¡æ¯
- å»é™¤EXIFã€äºŒç»´ç ç”Ÿæˆã€å›¾ç‰‡è½¬Base64ã€GIFè°ƒæ•´
- å›¾ç‰‡æ‹¼æ¥ã€å›¾ç‰‡åˆ‡å‰²

### éŸ³é¢‘å¤„ç† (2ä¸ª)
- éŸ³é¢‘æ ¼å¼è½¬æ¢ã€éŸ³é¢‘å‹ç¼©

### è§†é¢‘å¤„ç† (3ä¸ª)
- è§†é¢‘å‹ç¼©ã€è§†é¢‘æ ¼å¼è½¬æ¢ã€æå–éŸ³é¢‘

### å¼€å‘å·¥å…· (4ä¸ª)
- Pythonç»ˆç«¯ã€Base64è½¬å›¾ç‰‡ã€ç¼–ç è½¬æ¢ã€ä»£ç æ ¼å¼åŒ–

**æ€»è®¡: 23ä¸ªå·¥å…·**

